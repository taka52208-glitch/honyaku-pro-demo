# 高精度翻訳アプリ - 要件定義書

## 要件定義の作成原則
- **「あったらいいな」は絶対に作らない**
- **拡張可能性のための余分な要素は一切追加しない**
- **将来の「もしかして」のための準備は禁止**
- **今、ここで必要な最小限の要素のみ**

---

## 1. プロジェクト概要

### 1.1 成果目標
案件獲得のため、翻訳アプリの主要機能（音声翻訳・カメラ翻訳・多言語対応）を実演できるWebデモアプリを作成する。

### 1.2 成功指標

#### 定量的指標
- 音声入力から翻訳結果表示まで3秒以内で動作する
- カメラ/画像からのOCR翻訳が動作する
- 10言語以上の翻訳ペアが選択可能
- 有料/無料プランの切り替えUIが実装されている

#### 定性的指標
- クライアントが「この人なら本番開発を任せられる」と感じる完成度
- 案件の要件（音声・カメラ・多言語）を網羅していることが一目でわかる
- UIが直感的で、Google翻訳やDeepLに近い洗練された印象を与える

---

## 2. システム全体像

### 2.1 主要機能一覧
- **テキスト翻訳**: 入力テキストを選択した言語ペアで翻訳
- **音声翻訳**: 音声入力→テキスト変換→翻訳→音声出力
- **カメラ翻訳**: 画像からOCRでテキスト抽出→翻訳
- **プラン切替UI**: 有料/無料プランの表示切り替え（デモ用）

### 2.2 ユーザーロールと権限（MVPのため認証なし）
- ゲスト: 全機能にアクセス可能（認証不要）

### 2.3 認証・認可要件
- 認証方式: なし（デモアプリのため）
- セキュリティレベル: 公開情報のみ
- 管理機能: 不要

---

## 3. ページ詳細仕様

### 3.1 P-001: 翻訳メインページ

#### 目的
テキスト・音声翻訳の中核機能を提供し、案件要件の「同時通話翻訳」「言語ペア設定」「ナチュラル発声」を実演する。

#### 主要機能
- 言語ペア選択（ソース言語・ターゲット言語）
- テキスト入力エリア
- 翻訳結果表示エリア
- 音声入力ボタン（マイク）
- 音声再生ボタン（スピーカー）
- 有料/無料プラン切替トグル
- カメラ翻訳ページへの遷移ボタン

#### 必要な操作
| 操作種別 | 操作内容 | 必要な入力 | 期待される出力 |
|---------|---------|-----------|---------------|
| 翻訳 | テキストを翻訳 | ソース言語、ターゲット言語、テキスト | 翻訳結果テキスト |
| 音声認識 | 音声をテキストに変換 | マイク入力 | 認識されたテキスト |
| 音声合成 | テキストを音声で再生 | テキスト、言語 | 音声出力 |

#### 処理フロー
1. ユーザーが言語ペアを選択
2. テキスト入力または音声入力
3. 翻訳APIを呼び出し
4. 翻訳結果を表示
5. 必要に応じて音声再生

#### データ構造（概念）
```yaml
翻訳リクエスト:
  基本情報:
    - sourceLanguage（必須）: ソース言語コード
    - targetLanguage（必須）: ターゲット言語コード
    - text（必須）: 翻訳対象テキスト
  オプション:
    - plan: free | premium（UIデモ用）
```

---

### 3.2 P-002: カメラ翻訳ページ

#### 目的
カメラ/画像からのOCR翻訳を提供し、案件要件の「カメラスキャン翻訳」「書類・看板の即座翻訳」を実演する。

#### 主要機能
- カメラプレビュー表示
- 撮影ボタン
- 画像アップロード機能
- OCR結果表示エリア
- 翻訳結果表示エリア
- 音声再生ボタン
- メインページへの戻るボタン

#### 必要な操作
| 操作種別 | 操作内容 | 必要な入力 | 期待される出力 |
|---------|---------|-----------|---------------|
| 撮影 | カメラで画像を取得 | カメラ入力 | 画像データ |
| アップロード | 画像ファイルを選択 | ファイル選択 | 画像データ |
| OCR | 画像からテキスト抽出 | 画像データ | 抽出テキスト |
| 翻訳 | 抽出テキストを翻訳 | テキスト、言語ペア | 翻訳結果 |

#### 処理フロー
1. カメラ撮影または画像アップロード
2. Tesseract.jsでOCR処理
3. 抽出テキストを表示
4. 翻訳APIを呼び出し
5. 翻訳結果を表示
6. 必要に応じて音声再生

#### データ構造（概念）
```yaml
OCRリクエスト:
  基本情報:
    - image（必須）: 画像データ（Base64 or Blob）
    - sourceLanguage（任意）: OCR対象言語ヒント
```

---

## 4. データ設計概要

### 4.1 主要エンティティ

```yaml
言語設定:
  概要: ユーザーが選択した言語ペア（ローカルステート）
  主要属性:
    - sourceLanguage: ソース言語コード（例: ja, en, zh）
    - targetLanguage: ターゲット言語コード
  永続化: localStorage（ブラウザ）

対応言語マスタ:
  概要: 翻訳可能な言語の一覧（静的データ）
  主要属性:
    - code: 言語コード（BCP-47形式）
    - name: 表示名（日本語）
    - nativeName: 表示名（その言語）
```

### 4.2 エンティティ関係図
```
言語設定 ─── 対応言語マスタ（参照のみ）
```

### 4.3 バリデーションルール
```yaml
テキスト入力:
  - ルール: 5000文字以下
  - 理由: API制限とUX考慮

画像サイズ:
  - ルール: 10MB以下
  - 理由: クライアントサイドOCR処理の負荷軽減
```

---

## 5. 制約事項

### 外部API制限
- **Google Cloud Translation API**: 50万文字/月（無料枠）
- **Web Speech API**: Chrome/Edgeのみ対応

### 技術的制約
- **ブラウザ対応**: Chrome、Edge推奨（音声認識のため）
- **カメラアクセス**: HTTPS環境必須
- **OCR精度**: Tesseract.jsはクラウドAPIより精度が劣る

---

## 5.1 セキュリティ要件

### 基本方針
本プロジェクトは **CVSS 3.1（Common Vulnerability Scoring System）** に準拠したセキュリティ要件を満たすこと。

### MVP判定

**認証機能がない場合（本プロジェクト）**:
- ブルートフォース対策は不要
- 基本的なセキュリティヘッダーのみ設定

**その他の一般要件**:
- HTTPSの強制（本番環境・Vercelで自動対応）
- APIキーの環境変数管理
- 入力値のサニタイゼーション

---

## 6. 複合API処理（バックエンド内部処理）

本プロジェクトはフロントエンドのみで完結するため、複合API処理は発生しない。

---

## 7. 技術スタック

```yaml
フロントエンド:
  - フレームワーク: React 18
  - 言語: TypeScript 5
  - UIライブラリ: MUI v6
  - ルーティング: React Router v6
  - ビルドツール: Vite 5

バックエンド:
  - なし（フロントエンドのみで完結）

外部API:
  - 翻訳: Google Cloud Translation API
  - 音声認識: Web Speech API（ブラウザ標準）
  - 音声合成: Web Speech Synthesis API（ブラウザ標準）
  - OCR: Tesseract.js

インフラ:
  - ホスティング: Vercel
```

---

## 8. 必要な外部サービス・アカウント

### 必須サービス
| サービス名 | 用途 | 取得先 | 備考 |
|-----------|------|--------|------|
| Google Cloud | Translation API | https://console.cloud.google.com | APIキー発行が必要 |
| Vercel | ホスティング | https://vercel.com | GitHubアカウント連携 |

### オプションサービス
なし

---

## 9. 今後の拡張予定

**原則**: 拡張予定があっても、必要最小限の実装のみを行う

（案件獲得後の本番開発で検討する機能）
- オフライン翻訳対応（20言語）
- 専門用語辞書（医療・建設・科学・経済）
- 有料プラン課金システム
- デバイスへの組み込み対応

---

## 付録：対応言語一覧（デモ用10言語）

| コード | 言語名 | ネイティブ名 |
|--------|--------|-------------|
| ja | 日本語 | 日本語 |
| en | 英語 | English |
| zh | 中国語（簡体） | 简体中文 |
| ko | 韓国語 | 한국어 |
| es | スペイン語 | Español |
| fr | フランス語 | Français |
| de | ドイツ語 | Deutsch |
| pt | ポルトガル語 | Português |
| it | イタリア語 | Italiano |
| ru | ロシア語 | Русский |
